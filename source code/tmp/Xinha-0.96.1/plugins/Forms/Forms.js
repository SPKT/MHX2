/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function Forms(d){this.editor=d;var b=d.config;var h=Forms.btnList;var c=this;var a=["linebreak"];for(var f=0;f<h.length;++f){var e=h[f];if(!e){a.push("separator")}else{var g=e[0];if(f<3){b.registerButton(g,this._lc(e[1]),d.imgURL("ed_"+e[0]+".gif","Forms"),false,function(i,j){c.buttonPress(i,j)})}else{b.registerButton(g,this._lc(e[1]),d.imgURL("ed_"+e[0]+".gif","Forms"),false,function(i,j){c.buttonPress(i,j)},"form")}a.push(g)}}b.toolbar.push(a)}Forms._pluginInfo={name:"Forms",origin:"version: 1.0, by Nelson Bright, BrightWork, Inc., http://www.brightworkweb.com",version:"2.0",developer:"Udo Schmal",developer_url:"",sponsor:"L.N.Schaffrath NeueMedien",sponsor_url:"http://www.schaffrath-neuemedien.de/",c_owner:"Udo Schmal & Schaffrath-NeueMedien",license:"htmlArea"};Forms.btnList=[null,["form","Form"],null,["textarea","Textarea"],["select","Selection Field"],["checkbox","Checkbox"],["radio","Radio Button"],["text","Text Field"],["password","Password Field"],["file","File Field"],["button","Button"],["submit","Submit Button"],["reset","Reset Button"],["image","Image Button"],["hidden","Hidden Field"],["label","Label"],["fieldset","Field Set"]];Forms.prototype._lc=function(a){return Xinha._lc(a,"Forms")};Forms.prototype.onGenerate=function(){this.editor.addEditorStylesheet(Xinha.getPluginDir("Forms")+"/forms.css")};Forms.prototype.buttonPress=function(a,f,c){function n(p,i){this.text=p;this.value=i}var h=new Object();var k=f;var b=a._getSelection();var e=a._createRange(b);if(f=="form"){var j=a.getParentElement();var m=null;while(j&&(j.nodeType==1)&&(j.tagName.toLowerCase()!="body")){if(j.tagName.toLowerCase()=="form"){m=j;break}else{j=j.parentNode}}if(m){h.f_name=m.name;h.f_action=m.action;h.f_method=m.method;h.f_enctype=m.enctype;h.f_target=m.target}else{h.f_name="";h.f_action="";h.f_method="";h.f_enctype="";h.f_target=""}a._popupDialog("plugin://Forms/form",function(i){if(i){if(m){m.name=i.f_name;m.setAttribute("action",i.f_action);m.setAttribute("method",i.f_method);m.setAttribute("enctype",i.f_enctype);m.setAttribute("target",i.f_target)}else{m='<form name="'+i.f_name+'"';if(i.f_action!=""){m+=' action="'+i.f_action+'"'}if(i.f_method!=""){m+=' method="'+i.f_method+'"'}if(i.f_enctype!=""){m+=' enctype="'+i.f_enctype+'"'}if(i.f_target!=""){m+=' target="'+i.f_target+'"'}m+=">";a.surroundHTML(m,"&nbsp;</form>")}}},h)}else{var g="";if(typeof c=="undefined"){c=a.getParentElement();var o=c.tagName.toLowerCase();if(c&&(o=="legend")){c=c.parentElement;o=c.tagName.toLowerCase()}if(c&&!(o=="textarea"||o=="select"||o=="input"||o=="label"||o=="fieldset")){c=null}}if(c){k=c.tagName.toLowerCase();h.f_name=c.name;g=c.tagName;if(k=="input"){h.f_type=c.type;k=c.type}switch(k){case"textarea":h.f_cols=c.cols;h.f_rows=c.rows;h.f_text=c.innerHTML;h.f_wrap=c.getAttribute("wrap");h.f_readOnly=c.getAttribute("readOnly");h.f_disabled=c.getAttribute("disabled");h.f_tabindex=c.getAttribute("tabindex");h.f_accesskey=c.getAttribute("accesskey");break;case"select":h.f_size=parseInt(c.size);h.f_multiple=c.getAttribute("multiple");h.f_disabled=c.getAttribute("disabled");h.f_tabindex=c.getAttribute("tabindex");var l=new Array();for(var d=0;d<=c.options.length-1;d++){l[d]=new n(c.options[d].text,c.options[d].value)}h.f_options=l;break;case"text":case"password":h.f_value=c.value;h.f_size=c.size;h.f_maxLength=c.maxLength;h.f_readOnly=c.getAttribute("readOnly");h.f_disabled=c.getAttribute("disabled");h.f_tabindex=c.getAttribute("tabindex");h.f_accesskey=c.getAttribute("accesskey");break;case"hidden":h.f_value=c.value;break;case"submit":case"reset":h.f_value=c.value;h.f_disabled=c.getAttribute("disabled");h.f_tabindex=c.getAttribute("tabindex");h.f_accesskey=c.getAttribute("accesskey");break;case"checkbox":case"radio":h.f_value=c.value;h.f_checked=c.checked;h.f_disabled=c.getAttribute("disabled");h.f_tabindex=c.getAttribute("tabindex");h.f_accesskey=c.getAttribute("accesskey");break;case"button":h.f_value=c.value;h.f_onclick=c.getAttribute("onclick");h.f_disabled=c.getAttribute("disabled");h.f_tabindex=c.getAttribute("tabindex");h.f_accesskey=c.getAttribute("accesskey");break;case"image":h.f_value=c.value;h.f_src=c.src;h.f_disabled=c.getAttribute("disabled");h.f_tabindex=c.getAttribute("tabindex");h.f_accesskey=c.getAttribute("accesskey");break;case"file":h.f_disabled=c.getAttribute("disabled");h.f_tabindex=c.getAttribute("tabindex");h.f_accesskey=c.getAttribute("accesskey");break;case"label":h.f_text=c.innerHTML;h.f_for=c.getAttribute("for");h.f_accesskey=c.getAttribute("accesskey");break;case"fieldset":if(c.firstChild.tagName.toLowerCase()=="legend"){h.f_text=c.firstChild.innerHTML}else{h.f_text=""}break}}else{h.f_name="";switch(f){case"textarea":case"select":case"label":case"fieldset":g=f;break;default:g="input";h.f_type=f;break}h.f_options="";h.f_cols="20";h.f_rows="4";h.f_multiple="false";h.f_value="";h.f_size="";h.f_maxLength="";h.f_checked="";h.f_src="";h.f_onclick="";h.f_wrap="";h.f_readOnly="false";h.f_disabled="false";h.f_tabindex="";h.f_accesskey="";h.f_for="";h.f_text="";h.f_legend=""}a._popupDialog("plugin://Forms/"+g+".html",function(q){if(q){if(q.f_cols){if(isNaN(parseInt(q.f_cols,10))||parseInt(q.f_cols,10)<=0){q.f_cols=""}}if(q.f_rows){if(isNaN(parseInt(q.f_rows,10))||parseInt(q.f_rows,10)<=0){q.f_rows=""}}if(q.f_size){if(isNaN(parseInt(q.f_size,10))||parseInt(q.f_size,10)<=0){q.f_size=""}}if(q.f_maxlength){if(isNaN(parseInt(q.f_maxLength,10))||parseInt(q.f_maxLength,10)<=0){q.f_maxLength=""}}if(c){for(field in q){if((field=="f_text")||(field=="f_options")||(field=="f_onclick")||(field=="f_checked")){continue}if(q[field]!=""){c.setAttribute(field.substring(2,20),q[field])}else{c.removeAttribute(field.substring(2,20))}}if(k=="textarea"){c.innerHTML=q.f_text}else{if(k=="select"){c.options.length=0;var p=q.f_options;for(d=0;d<=p.length-1;d++){c.options[d]=new Option(p[d].text,p[d].value)}}else{if(k=="label"){c.innerHTML=q.f_text}else{if(k=="fieldset"){if(h.f_text!=""){if(c.firstChild.tagName.toLowerCase()=="legend"){c.firstChild.innerHTML=q.f_text}}else{}}else{if((k=="checkbox")||(k=="radio")){if(q.f_checked!=""){c.checked=true}else{c.checked=false}}else{if(q.f_onclick){c.onclick="";if(q.f_onclick!=""){c.onclick=q.f_onclick}}}}}}}}else{var i="";for(field in q){if(!q[field]){continue}if((q[field]=="")||(field=="f_text")||(field=="f_options")){continue}i+=" "+field.substring(2,20)+'="'+q[field]+'"'}if(k=="textarea"){i="<textarea"+i+">"+q.f_text+"</textarea>"}else{if(k=="select"){i="<select"+i+">";var p=q.f_options;for(d=0;d<=p.length-1;d++){i+='<option value="'+p[d].value+'">'+p[d].text+"</option>"}i+="</select>"}else{if(k=="label"){i="<label"+i+">"+q.f_text+"</label>"}else{if(k=="fieldset"){i="<fieldset"+i+">";if(q.f_legend!=""){i+="<legend>"+q.f_text+"</legend>"}i+="</fieldset>"}else{i='<input type="'+k+'"'+i+">"}}}}a.insertHTML(i)}}},h)}};