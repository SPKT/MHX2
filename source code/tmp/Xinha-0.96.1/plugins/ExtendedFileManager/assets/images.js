/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function i18n(a){return Xinha._lc(a,"ExtendedFileManager")}function changeDir(d){showMessage("Loading");var c=window.top.document.getElementById("manager_mode").value;var a=window.top.document.getElementById("viewtype");var b=a.options[a.selectedIndex].value;location.href=_backend_url+"__function=images&mode="+c+"&dir="+d+"&viewtype="+b;document.cookie="EFMStartDir"+c+"="+d}function newFolder(c,e){var d=window.top.document.getElementById("manager_mode").value;var a=window.top.document.getElementById("viewtype");var b=a.options[a.selectedIndex].value;location.href=_backend_url+"__function=images&mode="+d+"&dir="+c+"&newDir="+e+"&viewtype="+b}function renameFile(d){var b=d.replace(/.*%2F/,"").replace(/\..*$/,"");var c=function(e){if(e==""||e==null||e==b){alert(i18n("Cancelled rename."));return false}var i=window.top.document.getElementById("manager_mode").value;var f=window.top.document.getElementById("dirPath");var h=f.options[f.selectedIndex].value;f=window.top.document.getElementById("viewtype");var g=f.options[f.selectedIndex].value;location.href=_backend_url+"__function=images&mode="+i+"&dir="+h+"&rename="+d+"&renameTo="+e+"&viewtype="+g};if(Xinha.ie_version>6){popupPrompt(i18n("Please enter new name for this file..."),b,c,i18n("Rename"))}else{var a=prompt(i18n("Please enter new name for this file..."),b);c(a)}}function renameDir(b){function c(d){if(d==""||d==null||d==b){alert(i18n("Cancelled rename."));return false}var h=window.top.document.getElementById("manager_mode").value;var e=window.top.document.getElementById("dirPath");var g=e.options[e.selectedIndex].value;e=window.top.document.getElementById("viewtype");var f=e.options[e.selectedIndex].value;location.href=_backend_url+"__function=images&mode="+h+"&dir="+g+"&rename="+b+"&renameTo="+d+"&viewtype="+f}if(Xinha.ie_version>6){popupPrompt(i18n("Please enter new name for this folder..."),b,c,i18n("Rename"))}else{var a=prompt(i18n("Please enter new name for this folder..."),b);c(a)}}function copyFile(d,a){var b=window.top.document.getElementById("dirPath");var c=b.options[b.selectedIndex].value;window.top.pasteButton({dir:c,file:d,action:a+"File"})}function copyDir(d,a){var b=window.top.document.getElementById("dirPath");var c=b.options[b.selectedIndex].value;window.top.pasteButton({dir:c,file:d,action:a+"Dir"})}function paste(a){var e=window.top.document.getElementById("manager_mode").value;var b=window.top.document.getElementById("dirPath");var d=b.options[b.selectedIndex].value;b=window.top.document.getElementById("viewtype");var c=b.options[b.selectedIndex].value;location.href=_backend_url+"__function=images&mode="+e+"&dir="+d+"&paste="+a.action+"&srcdir="+a.dir+"&file="+a.file+"&viewtype="+c}function updateDir(e){var d=window.top.document.getElementById("manager_mode").value;document.cookie="EFMStartDir"+d+"="+e;var a=window.top.document.getElementById("dirPath");if(a){for(var c=0;c<a.length;c++){var b=a.options[c].text;if(b==e){a.selectedIndex=c;showMessage("Loading");break}}}}function emptyProperties(){toggleImageProperties(false);var a=window.top.document;a.getElementById("f_url").value="";a.getElementById("f_alt").value="";a.getElementById("f_title").value="";a.getElementById("f_width").value="";a.getElementById("f_margin").value="";a.getElementById("f_height").value="";a.getElementById("f_padding").value="";a.getElementById("f_border").value="";a.getElementById("f_borderColor").value="";a.getElementById("f_backgroundColor").value=""}function toggleImageProperties(b){var a=window.top.document;if(b==true){a.getElementById("f_width").value="";a.getElementById("f_margin").value="";a.getElementById("f_height").value="";a.getElementById("f_padding").value="";a.getElementById("f_border").value="";a.getElementById("f_borderColor").value="";a.getElementById("f_backgroundColor").value=""}a.getElementById("f_width").disabled=b;a.getElementById("f_margin").disabled=b;a.getElementById("f_height").disabled=b;a.getElementById("f_padding").disabled=b;a.getElementById("f_align").disabled=b;a.getElementById("f_border").disabled=b;a.getElementById("f_borderColor").value="";a.getElementById("f_backgroundColor").value="";a.getElementById("constrain_prop").disabled=b}function selectImage(b,f,a,d){var c=window.top.document;if(c.getElementById("manager_mode").value=="image"){var e=c.getElementById("f_url");e.value=b;e=c.getElementById("f_alt");e.value=f;e=c.getElementById("f_title");e.value=f;if(a==0&&d==0){toggleImageProperties(true)}else{toggleImageProperties(false);var e=c.getElementById("f_width");e.value=a;var e=c.getElementById("f_height");e.value=d;var e=c.getElementById("orginal_width");e.value=a;var e=c.getElementById("orginal_height");e.value=d;update_selected()}}else{if(c.getElementById("manager_mode").value=="link"){var e=c.getElementById("f_href");e.value=b;var e=c.getElementById("f_title");e.value=f}}return false}var _current_selected=null;function update_selected(){var e=window.top.document;if(_current_selected){_current_selected.className=_current_selected.className.replace(/(^| )active( |$)/,"$1$2");_current_selected=null}var d=e.getElementById("f_url").value;var a=e.getElementById("dirPath");var f=a.options[a.selectedIndex].text;var c=new RegExp("^("+f.replace(/([\/\^$*+?.()|{}[\]])/g,"\\$1")+")([^/]*)$");if(c.test(d)){var b=document.getElementById("holder_"+asc2hex(RegExp.$2));if(b){_current_selected=b;b.className+=" active"}}showPreview(d)}function asc2hex(d){var c="";for(var a=0;a<d.length;a++){var b=(d.charCodeAt(a)).toString(16);if(b.length==1){b="0"+b}c+=b}return c}function showMessage(b){var d=window.top.document;var c=d.getElementById("message");var a=d.getElementById("messages");if(c&&a){if(c.firstChild){c.removeChild(c.firstChild)}c.appendChild(d.createTextNode(i18n(b)));a.style.display="block"}}function updateDiskMesg(a){var b=window.top.document;var c=b.getElementById("diskmesg");if(c){if(c.firstChild){c.removeChild(c.firstChild)}c.appendChild(b.createTextNode(a))}}function addEvent(d,a,b){if(d.addEventListener){d.addEventListener(a,b,true);return true}else{if(d.attachEvent){var c=d.attachEvent("on"+a,b);return c}else{return false}}}function confirmDeleteFile(a){if(confirm(i18n('Delete file "$file='+a+'$"?'))){return true}return false}function confirmDeleteDir(a,b){if(confirm(i18n('Delete folder "$dir='+a+'$"?'))){return true}return false}function showPreview(a){window.parent.document.getElementById("f_preview").src=a?window.parent._backend_url+"__function=thumbs&img="+a:window.parent.opener.Xinha.getPluginDir("ExtendedFileManager")+"/img/1x1_transparent.gif"}addEvent(window,"load",init);