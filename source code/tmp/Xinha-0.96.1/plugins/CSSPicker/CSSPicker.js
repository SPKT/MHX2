/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function CSSPicker(a,b){this.editor=a;var c=this}CSSPicker._pluginInfo={name:"CSSPicker",version:"2008-12-01",author:"Justin Rovang"};CSSPicker.prototype.onGenerateOnce=function(){var a=this.editor;var b=this;a._cssPicker=a.addPanel("right");this.main=document.createElement("div");a._cssPicker.style.backgroundColor="#dee5f8";a._cssPicker.appendChild(this.main);Xinha.freeLater(this,"main");a.showPanel(a._cssPicker)};CSSPicker.prototype.onUpdateToolbar=function(){if(this.editor._cssPicker){if(this._timeoutID){window.clearTimeout(this._timeoutID)}var a=this.editor;this._timeoutID=window.setTimeout(function(){a._gen()},250)}};Xinha.prototype.listStyles=function(c){var a=this;var e=this.getSelection();var g;if(Xinha.is_ie){g=this.saveSelection();e=this.createRange(e).text}var f=document.createElement("div");f.className="CSSPickerOption";var b=a.getStyleInfo(c);if(b){Xinha._addClass(f,"CSSPickerOptionActive")}f.align="center";f.innerHTML='<div class="'+c+'">'+CSSPicker.cssList[c].name+"</div>";f.onclick=function(){a.wrapStyle(c,e,g,CSSPicker.cssList[c].wrapper);return false};Xinha._addEvent(f,"mouseover",function(d){Xinha._addClass(f,"CSSPickerOptionOver")});Xinha._addEvent(f,"mouseout",function(d){Xinha._removeClass(f,"CSSPickerOptionOver")});return f};Xinha.prototype._gen=function(){this.plugins.CSSPicker.instance.main.innerHTML="";for(var a in CSSPicker.cssList){this.plugins.CSSPicker.instance.main.appendChild(this.listStyles(a))}return true};Xinha.prototype.wrapStyle=function(d,e,g,f){if(!f){f="div"}f=f.toLowerCase();var a="";if(f=="div"){a="<br/>"}var b=this;this.focusEditor();if(Xinha.is_ie){this.restoreSelection(g)}var c=b.getStyleInfo(d);if(!c){if(e==""){e="&nbsp;"}this.insertHTML("<"+f+" class='"+d+"'>"+e+"</"+f+">"+a)}else{Xinha._removeClass(c,d)}return true};Xinha.prototype.getStyleInfo=function(c){var d=this;var e=this.getAllAncestors();var b,f;if(e){e.pop()}if(e.length>0){for(var g in e){b=e[g];if(b.className){f=b.className.trim()+" ";if(f.toLowerCase().match(c.toLowerCase()+" ")){return b}}}}return false};