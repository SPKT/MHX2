/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function i18n(a){return Xinha._lc(a,"ImageManager")}function setAlign(c){var a=document.getElementById("f_align");for(var b=0;b<a.length;b++){if(a.options[b].value==c){a.selectedIndex=b;break}}}doneinit=0;init=function(){if(doneinit++){return}__dlg_init(null,{width:600,height:460});__dlg_translate("ImageManager");document.getElementById("f_align").selectedIndex=1;document.getElementById("f_align").selectedIndex=0;var h=document.getElementById("uploadForm");if(h){h.target="imgManager"}var d=window.dialogArguments;if(d){var c=new RegExp("(https?://[^/]*)?"+base_url.replace(/\/$/,""));d.f_url=d.f_url.replace(c,"");var j=(_resized_dir)?_resized_dir.replace(Xinha.RE_Specials,"\\$1")+"/":"";var f=_resized_prefix.replace(Xinha.RE_Specials,"\\$1");var a=new RegExp("^(.*/)"+j+f+"_([0-9]+)x([0-9]+)_([^/]+)$");if(a.test(d.f_url)){d.f_url=RegExp.$1+RegExp.$4;d.f_width=RegExp.$2;d.f_height=RegExp.$3}for(var b in d){if(b=="f_align"){continue}if(document.getElementById(b)){document.getElementById(b).value=d[b]}}document.getElementById("orginal_width").value=d.f_width;document.getElementById("orginal_height").value=d.f_height;setAlign(d.f_align);var a=new RegExp("^(.*/)([^/]+)$");if(a.test(d.f_url)&&!(new RegExp("^https?://","i")).test(d.f_url)){changeDir(RegExp.$1);var g=document.getElementById("dirPath");for(var e=0;e<g.options.length;e++){if(g.options[e].value==encodeURIComponent(RegExp.$1)){g.options[e].selected=true;break}}}document.getElementById("f_preview").src=_backend_url+"__function=thumbs&img="+encodeURIComponent(d.f_url)}new Xinha.colorPicker.InputBinding(document.getElementById("f_backgroundColor"));new Xinha.colorPicker.InputBinding(document.getElementById("f_borderColor"));document.getElementById("f_alt").focus()};function onCancel(){__dlg_close(null);return false}function onOK(){var fields=["f_url","f_alt","f_align","f_width","f_height","f_padding","f_margin","f_border","f_borderColor","f_backgroundColor","f_hspace","f_vspace"];var param=new Object();for(var i in fields){var id=fields[i];var el=document.getElementById(id);if(id=="f_url"&&el.value.indexOf("://")<0){if(el.value==""){alert(i18n("No Image selected."));return(false)}param[id]=makeURL(base_url,el.value)}else{if(el){param[id]=el.value}}}var origsize={w:document.getElementById("orginal_width").value,h:document.getElementById("orginal_height").value};if((origsize.w!=param.f_width)||(origsize.h!=param.f_height)){var resized=Xinha._geturlcontent(_backend_url+"&__function=resizer&img="+encodeURIComponent(document.getElementById("f_url").value)+"&width="+param.f_width+"&height="+param.f_height);resized=eval(resized);if(resized){param.f_url=makeURL(base_url,resized)}}__dlg_close(param);return false}function makeURL(b,a){if(b.substring(b.length-1)!="/"){b+="/"}if(a.charAt(0)=="/"){}a=a.substring(1);return b+a}function updateDir(a){var b=a.options[a.selectedIndex].value;changeDir(b)}function goUpDir(){var a=document.getElementById("dirPath");var g=a.options[a.selectedIndex].text;if(g.length<2){return false}var e=g.split("/");var c="";for(var d=0;d<e.length-2;d++){c+=e[d]+"/"}for(var d=0;d<a.length;d++){var b=a.options[d].text;if(b==c){a.selectedIndex=d;var f=a.options[d].value;changeDir(f);break}}}function changeDir(a){if(typeof imgManager!="undefined"){imgManager.changeDir(a)}}function toggleConstrains(b){var a=document.getElementById("imgLock");var b=document.getElementById("constrain_prop");if(b.checked){a.src="img/locked.gif";checkConstrains("width")}else{a.src="img/unlocked.gif"}}function checkConstrains(f){var g=document.getElementById("constrain_prop");if(g.checked){var e=document.getElementById("orginal_width");var h=parseInt(e.value);var e=document.getElementById("orginal_height");var d=parseInt(e.value);var c=document.getElementById("f_width");var a=document.getElementById("f_height");var b=parseInt(c.value);var i=parseInt(a.value);if(h>0&&d>0){if(f=="width"&&b>0){a.value=parseInt((b/h)*d)}if(f=="height"&&i>0){c.value=parseInt((i/d)*h)}}}}function showMessage(b){var c=document.getElementById("message");var a=document.getElementById("messages");if(c.firstChild){c.removeChild(c.firstChild)}c.appendChild(document.createTextNode(i18n(b)));a.style.display=""}function addEvent(d,a,b){if(d.addEventListener){d.addEventListener(a,b,true);return true}else{if(d.attachEvent){var c=d.attachEvent("on"+a,b);return c}else{return false}}}function doUpload(){var a=document.getElementById("uploadForm");if(a){showMessage("Uploading")}}function refresh(){var a=document.getElementById("dirPath");updateDir(a)}function newFolder(){function b(c){var d=document.getElementById("dirPath");var e=d.options[d.selectedIndex].value;if(c==thumbdir){alert(i18n("Invalid folder name, please choose another folder name."));return false}if(c&&c!=""&&typeof imgManager!="undefined"){imgManager.newFolder(e,encodeURI(c))}}if(Xinha.ie_version>6){Dialog("newFolder.html",function(d){if(!d){return false}else{var c=d.f_foldername;b(c)}},null)}else{var a=prompt(i18n("Please enter name for new folder..."),i18n("Untitled"));b(a)}}addEvent(window,"load",init);