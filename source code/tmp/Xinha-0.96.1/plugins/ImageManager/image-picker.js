/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function ImagePicker(c){this.field=c;var b=this;var a=document.createElement("input");a.type="button";a.value="Browse";a.onclick=function(){b.popup_picker()};c.parentNode.insertBefore(a,c.nextSibling);c.size="20";c.style.textAlign="right"}ImagePicker.prototype.backend=Xinha.getPluginDir("ImageManager")+"/backend.php?__plugin=ImageManager&";ImagePicker.prototype.backend_data=null;ImagePicker.prototype.append_query_string=true;ImagePicker.prototype.popup_picker=function(){var c=this;var d=null;if(c.field.value){d={f_url:c.field.value,f_width:null,f_height:null,f_alt:c.field.value,f_border:null,f_align:null,f_padding:null,f_margin:null,f_backgroundColor:null,f_borderColor:null,f_border:null,f_padding:null,f_margin:null};while(d.f_url.match(/[?&]((f_[a-z0-9]+)=([^&#]+))/i)){d[RegExp.$2]=decodeURIComponent(RegExp.$3);d.f_url=d.f_url.replace(RegExp.$1,"")}d.f_url=d.f_url.replace(/&{2,}/g,"&");d.f_url=d.f_url.replace(/\?&*(#.*)?$/,"")}var b=this.backend+"__function=manager";if(this.backend_config!=null){b+="&backend_config="+encodeURIComponent(this.backend_config);b+="&backend_config_hash="+encodeURIComponent(this.backend_config_hash);b+="&backend_config_secret_key_location="+encodeURIComponent(this.backend_config_secret_key_location)}if(this.backend_data!=null){for(var a in this.backend_data){b+="&"+a+"="+encodeURIComponent(this.backend_data[a])}}Dialog(b,function(f){if(!f){return false}c.field.value=f.f_url;if(c.append_query_string){if(c.field.value.match(/[?&](.*)$/)){if(RegExp.$1.length){c.field.value+="&"}}else{c.field.value+="?"}for(var e in f){if(e=="f_url"||f[e]==null||f[e]=="null"||f[e]==""){continue}if(typeof f[e]=="function"){continue}if(f[e].length=0){continue}c.field.value+=e+"="+encodeURIComponent(f[e])+"&"}}},d)};if(typeof Dialog=="undefined"){function Dialog(b,a,d){if(typeof d=="undefined"){d=window}var c=window.open(b,"hadialog","toolbar=no,menubar=no,personalbar=no,width=10,height=10,scrollbars=yes,resizable=yes,modal=yes,dependable=yes");Dialog._modal=c;Dialog._arguments=d;Dialog._return=function(e){if(e&&a){a(e)}Dialog._modal=null};Dialog._modal.focus()}Dialog._return=null;Dialog._modal=null;Dialog._arguments=null}ImagePicker.prototype.backend_config=null;ImagePicker.prototype.backend_config_hash=null;ImagePicker.prototype.backend_config_secret_key_location="Xinha:ImageManager";