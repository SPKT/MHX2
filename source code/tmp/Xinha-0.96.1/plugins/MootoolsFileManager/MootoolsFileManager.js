/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
MootoolsFileManager._pluginInfo={name:"Mootols File Manager",version:"1.0",developer:"James Sleeman (Xinha), Christoph Pojer (FileManager)",license:"MIT"};Xinha.Config.prototype.MootoolsFileManager={backend:Xinha.getPluginDir("MootoolsFileManager")+"/backend.php?__plugin=MootoolsFileManager&",backend_data:{}};MootoolsFileManager.AssetLoader=Xinha.includeAssets();if(typeof MooTools=="undefined"){MootoolsFileManager.AssetLoader.loadScript("mootools-filemanager/Demos/mootools-core.js","MootoolsFileManager").loadScript("mootools-filemanager/Demos/mootools-more.js","MootoolsFileManager")}if(typeof FileManager=="undefined"){MootoolsFileManager.AssetLoader.loadStyle("mootools-filemanager/Css/FileManager.css","MootoolsFileManager").loadStyle("mootools-filemanager/Css/Additions.css","MootoolsFileManager").loadScript("mootools-filemanager/Source/FileManager.js","MootoolsFileManager").loadScript("mootools-filemanager/Language/Language.en.js","MootoolsFileManager").loadScript("mootools-filemanager/Source/Additions.js","MootoolsFileManager").loadScript("mootools-filemanager/Source/Uploader/Fx.ProgressBar.js","MootoolsFileManager").loadScript("mootools-filemanager/Source/Uploader/Swiff.Uploader.js","MootoolsFileManager").loadScript("mootools-filemanager/Source/Uploader.js","MootoolsFileManager")}MootoolsFileManager.AssetLoader.loadStyle("MootoolsFileManager.css","MootoolsFileManager");function MootoolsFileManager(editor){this.editor=editor;var self=this;var cfg=editor.config;Xinha._postback(editor.config.MootoolsFileManager.backend+"__function=read-config",editor.config.MootoolsFileManager.backend_data,function(phpcfg){eval("var f = "+phpcfg+";");self.phpcfg=f;self.hookUpButtons()});return}MootoolsFileManager.prototype.hookUpButtons=function(){var a=this;var b=a.phpcfg;if(b.files_dir){MootoolsFileManager.AssetLoader.loadScriptOnce("MootoolsFileManager.FileManager.js","MootoolsFileManager");this.editor.config.registerButton({id:"linkfile",tooltip:Xinha._lc("Insert File Link","ExtendedFileManager"),image:Xinha.getPluginDir("ExtendedFileManager")+"/img/ed_linkfile.gif",textMode:false,action:function(c){MootoolsFileManager.AssetLoader.whenReady(function(){a.OpenFileManager()})}});this.editor.config.addToolbarElement("linkfile","createlink",1)}if(b.images_dir){MootoolsFileManager.AssetLoader.loadScriptOnce("MootoolsFileManager.ImageManager.js","MootoolsFileManager");a.editor._insertImage=function(){MootoolsFileManager.AssetLoader.whenReady(function(){a.OpenImageManager()})}}};MootoolsFileManager.prototype.ScaleImage=function(d,b,a){if(!d.height||!d.width){return b}if(!b.height&&!b.width){return d}if(!a){if(d.width>d.height){a="height"}else{a="width"}}var h=null;switch(a){case"height":h="width";break;case"width":h="height";break}if(!b[h]){var c=h;h=a;a=c}var e=0;switch(a){case"width":e=d.width/d.height;break;case"height":e=d.height/d.width;break}var g={};g[h]=b[h];g[a]=Math.floor(b[h]*e);if(isNaN(g[h])){g[h]=null}if(isNaN(g[a])){g[a]=null}return g};MootoolsFileManager.prototype.shortSize=function(a){if(/ /.test(a)){var d=a.split(" ");var c=true;for(var b=1;b<d.length;b++){if(d[0]!=d[b]){c=false;break}}if(c){a=d[0]}}return a};MootoolsFileManager.prototype.convertToHex=function(b){if(typeof b=="string"&&/, /.test.color){b=b.replace(/, /,",")}if(typeof b=="string"&&/ /.test.color){var d=b.split(" ");var a="";for(var c=0;c<d.length;c++){a+=Xinha._colorToRgb(d[c]);if(c+1<d.length){a+=" "}}return a}return Xinha._colorToRgb(b)};