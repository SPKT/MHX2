/* This compressed file is part of Xinha. For uncompressed sources, forum, and bug reports, go to xinha.org */
function BackgroundImage(c){this.editor=c;var a=c.config;var b=this;a.registerButton({id:"bgImage",tooltip:Xinha._lc("Set page background image","BackgroundImage"),image:c.imgURL("ed_bgimage.gif","BackgroundImage"),textMode:false,action:function(d){b.show()}});a.addToolbarElement("bgImage","inserthorizontalrule",1)}BackgroundImage._pluginInfo={name:"BackgroundImage",version:"1.0",developer:"Udo Schmal",developer_url:"http://www.schaffrath-neuemedien.de/",c_owner:"Udo Schmal & Schaffrath NeueMedien",sponsor:"L.N.Schaffrath NeueMedien",sponsor_url:"http://www.schaffrath-neuemedien.de.de/",license:"htmlArea"};BackgroundImage.prototype.onGenerateOnce=function(b){var a=BackgroundImage;if(a.loading){return}var c={blufur:"",palecnvs:"",ppplcnvs:"",ylwsand:""};a.loading=true;a.methodsReady=true;Xinha._getback(Xinha.getPluginDir("BackgroundImage")+"/dialog.html",function(d){a.html=d.replace(/<template>(.*?)<\/template>/ig,function(g,f){var i="";for(bg in c){var e=Xinha.getPluginDir("BackgroundImage")+"/backgrounds/thumbnails/"+bg+".jpg";var h=Xinha.getPluginDir("BackgroundImage")+"/backgrounds/"+bg+".jpg";i+=f.replace(/%thumbnail%/,e).replace(/%image%/,h)}return i});a.dialogReady=true})};BackgroundImage.prototype.onUpdateToolbar=function(a){if(!(BackgroundImage.dialogReady&&BackgroundImage.methodsReady)){this.editor._toolbarObjects.BackgroundImage.state("enabled",false)}else{this.onUpdateToolbar=null}};BackgroundImage.prototype.prepareDialog=function(b){var a=this;var b=this.editor;var c=this.dialog=new Xinha.Dialog(b,BackgroundImage.html,"Xinha",{width:400});c.getElementById("set").onclick=function(){a.apply()};c.getElementById("delete").onclick=function(){a.deleteBg()};c.getElementById("cancel").onclick=function(){a.dialog.hide()};this.dialogReady=true};BackgroundImage.prototype.show=function(a){if(!this.dialog){this.prepareDialog()}var a=this.editor;if(a._doc.body.background.split(".").pop() in {jpg:"",gif:"",png:"",jpeg:"",tiff:""}){var b=a._doc.body.background}else{var b=""}var c={background:b};this.dialog.show(c)};BackgroundImage.prototype.deleteBg=function(){var a=this.editor;this.dialog.hide();if(Xinha.is_ie){a.focusEditor()}a._doc.body.background=""};BackgroundImage.prototype.apply=function(){var a=this.editor;var b=a._doc;var c=this.dialog.hide();if(Xinha.is_ie){a.focusEditor()}b.body.background=c.background};